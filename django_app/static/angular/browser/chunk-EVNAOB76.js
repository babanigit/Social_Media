import{a as Z,b as X}from"./chunk-54JRC2PS.js";import{h as W}from"./chunk-MZEKH4JI.js";import{a as q,b as J,e as K,h as Q}from"./chunk-M5QJD5DK.js";import{a as $}from"./chunk-RI7U67P5.js";import{$ as A,Aa as G,Ba as U,Ca as N,J as _,K as s,L as b,Pa as H,R as c,Sa as R,T as p,X as t,Y as n,Z as m,_ as M,aa as O,ca as S,da as h,fa as o,ha as l,ia as P,ja as V,ka as F,m as E,oa as z,pa as x,q as L,qa as y,r as B,t as v,w as D,x as T,y as u,z as f,za as j}from"./chunk-YCZ53USQ.js";var w=class a{transform(i){let e=new Date(i),r={hour:"numeric",minute:"numeric",hour12:!0,day:"numeric",month:"short",year:"numeric"},d=e.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),g=e.toLocaleDateString("en-US",r);return`${d} \xB7 ${g}`}static \u0275fac=function(e){return new(e||a)};static \u0275pipe=v({name:"customDateFormat",type:a,pure:!0,standalone:!0})};var C=class a{transform(i){return!i||i.length===0?[]:i.sort((e,r)=>new Date(r.created_at).getTime()-new Date(e.created_at).getTime())}static \u0275fac=function(e){return new(e||a)};static \u0275pipe=v({name:"commentsSortByDate",type:a,pure:!0,standalone:!0})};var ne=a=>({"bg-red-500 text-white":a});function ie(a,i){a&1&&m(0,"app-loading-spinner")}function re(a,i){a&1&&(t(0,"span")(1,"span",17)(2,"a",71),o(3,"/autism"),n()()())}function oe(a,i){if(a&1){let e=O();t(0,"button",72),S("click",function(){D(e);let d=h(2);return T(d.LikeTweet(d.tweetById_Data.id))}),t(1,"span",63),u(),t(2,"svg",64),m(3,"path",73),n()()()}if(a&2){let e=h(2);p("ngClass",z(1,ne,e.tweetById_Data.liked_by_user_ids.includes(e.user.id)))}}function ae(a,i){if(a&1&&(t(0,"div",36)(1,"a",37),m(2,"img",38),n(),t(3,"div",39)(4,"div",40)(5,"div",41)(6,"a",42)(7,"span")(8,"span",17)(9,"span",43),o(10),n()()()(),t(11,"a",42)(12,"span")(13,"span",17)(14,"span",23),o(15),n()()()(),t(16,"span",44)(17,"span",45),o(18,"\xB7"),n(),t(19,"a",46),o(20),x(21,"timeAgo"),n()(),t(22,"span",47)(23,"span",45),o(24,"\xB7"),n(),c(25,re,4,0,"span",0),n()(),t(26,"div",48)(27,"button",49),u(),t(28,"svg",50),m(29,"path",51),n()()()(),f(),t(30,"div",52)(31,"div",53)(32,"p"),o(33),n()()(),t(34,"div",54)(35,"span"),o(36),x(37,"customDateFormat"),n(),t(38,"span"),o(39," \xB7 Posted via Orb"),n()(),m(40,"div",55),t(41,"div",56)(42,"span")(43,"b",57),o(44),n(),o(45," Comments"),n(),t(46,"button",58)(47,"b",57),o(48),n(),o(49," Likes"),n()(),m(50,"div",55),t(51,"div",15)(52,"span",59)(53,"span",60)(54,"div",61)(55,"button",62)(56,"span",63),u(),t(57,"svg",64),m(58,"path",65),n()()()(),f(),t(59,"div",66)(60,"div",48)(61,"button",67)(62,"span",63),u(),t(63,"svg",68),m(64,"path",69),n()()()()(),f(),t(65,"div",61),c(66,oe,4,3,"button",70),n()()()()()()),a&2){let e=h();s(2),p("src","http://127.0.0.1:8000"+e.tweetById_Data.user.profile_image,_),s(8),l("",e.tweetById_Data.user.name," "),s(5),l("@",e.tweetById_Data.user.username," "),s(5),l(" ",y(21,10,e.tweetById_Data.created_at)," "),s(5),p("ngIf",!1),s(8),l(" ",e.tweetById_Data.content," "),s(3),l(" ",y(37,12,e.tweetById_Data.created_at)," "),s(8),l(" ",e.tweetById_Data.comments_count," "),s(4),l(" ",e.tweetById_Data.likes_count," "),s(18),p("ngIf",e.user!==void 0&&e.user)}}function se(a,i){if(a&1&&(t(0,"div",75)(1,"article",76)(2,"div",36)(3,"a",77),m(4,"img",78),n(),t(5,"div",39)(6,"div",40)(7,"div",41)(8,"a",79)(9,"span")(10,"span",17)(11,"span",43),o(12),n()()()(),t(13,"a",79)(14,"span")(15,"span",17)(16,"span",23),o(17),n()()()(),t(18,"span",44)(19,"span",45),o(20,"\xB7"),n(),t(21,"a",80),o(22),x(23,"timeAgo"),n()()(),t(24,"div",48)(25,"button",81),u(),t(26,"svg",50),m(27,"path",51),n()()()(),f(),t(28,"div",52)(29,"div",82),o(30),n()(),t(31,"span",59),m(32,"span",60),n()()()()()),a&2){let e=i.$implicit;s(4),p("src","http://127.0.0.1:8000"+e.user.profile_image,_),s(8),l(" ",e.user.name," "),s(5),l("@",e.user.username," "),s(5),l(" ",y(23,5,e.created_at)," "),s(8),l(" ",e.content," ")}}function de(a,i){if(a&1&&(M(0),c(1,se,33,7,"div",74),x(2,"commentsSortByDate"),A()),a&2){let e=h();s(),p("ngForOf",y(2,1,e.commentsData.comments))}}var I=class a{constructor(i,e,r){this.route=i;this.apiSerV=e;this.toastr=r}postId=null;commentsData;tweetById_Data;commentById_Data;user;isLoading=!1;showLoading(){this.isLoading=!0}hideLoading(){this.isLoading=!1}ngOnInit(){this.route.paramMap.subscribe(i=>{this.postId=i.get("id"),this.postId&&this.fetchCommentAndTweetById(this.postId),this.getLoggedInUser()})}getLoggedInUser(){this.showLoading(),this.apiSerV.getLoggedInUser().subscribe({next:i=>{this.user=i,this.hideLoading()},error:i=>{this.hideLoading();let e=i.status,r=i.error?.error||"An unexpected error occurred"}})}fetchCommentAndTweetById(i){this.showLoading(),this.apiSerV.getTweetById(i).subscribe({next:e=>{this.tweetById_Data=e,this.hideLoading()},error:e=>{this.hideLoading();let r=e.status,d=e.error?.error||"An unexpected error occurred"}}),this.showLoading(),this.apiSerV.getTweetComments(i).subscribe({next:e=>{this.commentsData=e,this.hideLoading()},error:e=>{this.hideLoading();let r=e.status,d=e.error?.error||"An unexpected error occurred";this.toastr.error(d,`Error ${r}`)}})}toggleLikeComment(i){this.commentById_Data.liked_by_user_ids.includes(this.user.id)||this.apiSerV.likeComment(i).subscribe({next:()=>{this.commentById_Data.liked_by_user_ids.push(this.user.id)},error:e=>{let r=e.error?.error||"Failed to like comment";this.toastr.error(r,"Error")}})}LikeTweet(i){this.showLoading(),this.apiSerV.likeTweet(i).subscribe({next:e=>{this.postId&&this.fetchCommentAndTweetById(this.postId),this.hideLoading();let r=e.message;this.toastr.success(r,"Success",{timeOut:1200})},error:e=>{this.hideLoading();let r=e.status,d=e.error?.error||"An unexpected error occurred";this.toastr.error(d,`Error ${r}`)},complete:()=>{console.log("API request completed.")}})}LikeComment(i){this.showLoading(),this.apiSerV.likeComment(i).subscribe({next:e=>{this.postId&&this.fetchCommentAndTweetById(this.postId),this.hideLoading();let r=e.message;this.toastr.success(r,"Success",{timeOut:1200})},error:e=>{this.hideLoading();let r=e.status,d=e.error?.error||"An unexpected error occurred";this.toastr.error(d,`Error ${r}`)},complete:()=>{console.log("API request completed.")}})}DisLikeComment(i){this.showLoading(),this.apiSerV.dislikeComment(i).subscribe({next:e=>{this.postId&&this.fetchCommentAndTweetById(this.postId),this.hideLoading();let r=e.message;this.toastr.success(r,"Success",{timeOut:1200})},error:e=>{this.hideLoading();let r=e.status,d=e.error?.error||"An unexpected error occurred";this.toastr.error(d,`Error ${r}`)},complete:()=>{console.log("API request completed.")}})}comments=[];newComment="";addComment(){if(!this.newComment.trim()){this.toastr.warning("Comment cannot be empty");return}let i={content:this.newComment,user_id:this.user.id};this.apiSerV.createComment(this.postId,i).subscribe({next:e=>{this.comments.push(e.comment),this.toastr.success("Comment added successfully"),this.newComment="",this.postId&&this.fetchCommentAndTweetById(this.postId)},error:e=>{let r=e.status,d=e.error?.error||"An unexpected error occurred";this.toastr.error(d,`Error ${r}`)}})}static \u0275fac=function(e){return new(e||a)(b(H),b($),b(W))};static \u0275cmp=L({type:a,selectors:[["app-open-comments"]],decls:57,vars:4,consts:[[4,"ngIf"],[1,"container","mx-auto","mt-8","mb-2","max-w-screen-xl","grow","px-0","sm:px-5"],[1,"grid","grid-cols-11","lg:gap-8"],[1,"col-span-11","mb-5","md:col-span-11","lg:col-span-7","space-y-5"],[1,"rounded-none","border-x-0","sm:rounded-xl","sm:border-x","border","bg-white","dark:border-gray-700","dark:bg-black"],[1,"p-5"],["class","flex items-start space-x-3",4,"ngIf"],[1,"add-comment"],["placeholder","Write a comment...",3,"ngModelChange","ngModel"],[3,"click"],["data-virtuoso-scroller","true",1,"virtual-divider-list-window",2,"position","relative","height","auto"],["data-viewport-type","window",2,"width","100%","height","100%","position","relative","top","0px"],["data-testid","virtuoso-item-list",2,"box-sizing","border-box","margin-top","0px","padding-top","0px","padding-bottom","0px"],[1,"col-span-11","md:col-span-11","lg:col-span-4","space-y-5"],[1,"rounded-none","border-x-0","sm:rounded-xl","sm:border-x","border","bg-white","dark:border-gray-700","dark:bg-black","p-5"],[1,"flex","items-center","justify-between"],["href","/u/jeanayala"],["data-state","closed"],[1,"mr-8","flex","items-center","space-x-3"],["alt","0x0178c5","height","44","loading","lazy","src","https://ik.imagekit.io/lens/media-snapshot/tr:w-350,h-350/c51d3c6d4bc951b6295d0e4b39007072b1fe25caa4073544eca4ad3d0c0b02d5.webp","width","44",1,"size-11","rounded-full","border","bg-gray-200","dark:border-gray-700"],[1,"flex","max-w-sm","items-center"],[1,"text-md","grid"],[1,"truncate","font-semibold"],[1,"ld-text-gray-500","text-sm"],[1,"contents"],["aria-label","Follow",1,"text-gray-950","active:text-gray-300","dark:text-white","dark:active:text-gray-700","border","border-gray-300","hover:border-gray-950","dark:border-gray-700","dark:hover:border-gray-100","px-3","py-0.5","text-sm","rounded-full","font-bold","outline-2","outline-offset-4","transition-colors"],[1,"top-20","sticky","mt-4","flex","flex-wrap","gap-x-[12px]","gap-y-2","px-3","text-sm","lg:px-0"],[1,"ld-text-gray-500","font-bold"],["rel","noreferrer noopener","href","/terms",1,"outline-offset-4"],["rel","noreferrer noopener","href","/privacy",1,"outline-offset-4"],["rel","noreferrer noopener","href","/guidelines",1,"outline-offset-4"],["rel","noreferrer noopener","target","_blank","href","https://hey.xyz/discord",1,"outline-offset-4"],["rel","noreferrer noopener","href","/u/hey",1,"outline-offset-4"],["rel","noreferrer noopener","target","_blank","href","https://status.hey.xyz",1,"outline-offset-4"],["rel","noreferrer noopener","target","_blank","href","https://github.com/heyxyz/hey",1,"outline-offset-4"],["rel","noreferrer noopener","href","/support",1,"outline-offset-4"],[1,"flex","items-start","space-x-3"],["href","/u/jeanayala",1,"contents"],["alt","0x0178c5","height","44","loading","lazy","width","44",1,"size-11","z-[1]","cursor-pointer","rounded-full","border","bg-gray-200","dark:border-gray-700",3,"src"],[1,"w-[calc(100%-55px)]"],[1,"flex","w-full","items-start","justify-between"],[1,"flex","flex-wrap","items-center","gap-x-1"],["href","/u/jeanayala",1,"outline-none","hover:underline","focus:underline"],[1,"font-semibold"],[1,"ld-text-gray-500"],[1,"mr-1"],["href","/posts/0x0178c5-0x09c8-DA-b9083849",1,"text-xs","hover:underline"],[1,"ld-text-gray-500","linkify"],["data-headlessui-state","",1,"relative"],["aria-label","More","type","button","id","headlessui-menu-button-:r10s:","aria-haspopup","menu","aria-expanded","false","data-headlessui-state","",1,"rounded-full","p-1.5","hover:bg-gray-300/20"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true","data-slot","icon",1,"ld-text-gray-500","w-[15px]","sm:w-[18px]"],["stroke-linecap","round","stroke-linejoin","round","d","M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"],[1,"break-words"],[1,"markup","linkify","break-words","text-md","full-page-publication-markup"],[1,"ld-text-gray-500","my-3","text-sm"],[1,"divider"],[1,"ld-text-gray-500","flex","flex-wrap","items-center","gap-x-6","gap-y-3","py-3","text-sm"],[1,"text-black","dark:text-white"],["type","button",1,"outline-offset-2"],[1,"mt-3","flex","w-full","flex-wrap","items-center","justify-between","gap-3"],[1,"flex","items-center","gap-x-6"],[1,"ld-text-gray-500","flex","items-center","space-x-1"],["aria-label","Comment","type","button",1,"rounded-full","p-1.5","outline-offset-2","hover:bg-gray-300/20"],["data-state","closed",1,""],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true","data-slot","icon",1,"w-[17px]","sm:w-[20px]"],["stroke-linecap","round","stroke-linejoin","round","d","M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"],[1,"flex","items-center","space-x-1"],["aria-label","Mirror","id","headlessui-menu-button-:r110:","type","button","aria-haspopup","menu","aria-expanded","false","data-headlessui-state","",1,"ld-text-gray-500","hover:bg-gray-300/20","rounded-full","p-1.5","outline-offset-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true","data-slot","icon",1,"w-[15px]","sm:w-[18px]"],["stroke-linecap","round","stroke-linejoin","round","d","M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"],["aria-label","Like","class","hover:bg-gray-300/20 rounded-full p-1.5 outline-offset-2","type","button",3,"ngClass","click",4,"ngIf"],["href","/c/autism",1,"text-xs","hover:underline"],["aria-label","Like","type","button",1,"hover:bg-gray-300/20","rounded-full","p-1.5","outline-offset-2",3,"click","ngClass"],["stroke-linecap","round","stroke-linejoin","round","d","M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"],["data-index","0","data-known-size","280","data-item-index","0","style","overflow-anchor: none;",4,"ngFor","ngForOf"],["data-index","0","data-known-size","280","data-item-index","0",2,"overflow-anchor","none"],[1,"rounded-t-xl","cursor-pointer","px-5","pt-4","pb-3","transition-colors","hover:bg-gray-100","dark:hover:bg-gray-900"],["href","/u/eduardmsmr",1,"contents"],["alt","0x01a5d6","height","44","loading","lazy","width","44",1,"size-11","z-[1]","cursor-pointer","rounded-full","border","bg-gray-200","dark:border-gray-700",3,"src"],["href","/u/eduardmsmr",1,"outline-none","hover:underline","focus:underline"],["href","/posts/0x01a5d6-0x1c83-DA-1dd9a508",1,"text-xs","hover:underline"],["aria-label","More","type","button","id","headlessui-menu-button-:r119:","aria-haspopup","menu","aria-expanded","false","data-headlessui-state","",1,"rounded-full","p-1.5","hover:bg-gray-300/20"],[1,"markup","linkify","break-words","text-md"]],template:function(e,r){e&1&&(c(0,ie,1,0,"app-loading-spinner",0),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"article",5),m(6,"span"),c(7,ae,67,14,"div",6),n()(),t(8,"div")(9,"div",7)(10,"textarea",8),F("ngModelChange",function(g){return V(r.newComment,g)||(r.newComment=g),g}),n(),t(11,"button",9),S("click",function(){return r.addComment()}),o(12,"Post"),n()()(),t(13,"div",4)(14,"div",10)(15,"div",11)(16,"div",12),c(17,de,3,3,"ng-container",0),n()()()()(),t(18,"div",13)(19,"aside",14)(20,"div",15)(21,"a",16)(22,"span")(23,"span",17)(24,"div",18),m(25,"img",19),t(26,"div")(27,"div",20)(28,"div",21)(29,"div",22),o(30,"Jean Ayala"),n()()(),t(31,"div")(32,"span",23),o(33,"@jeanayala"),n()()()()()()(),t(34,"div",24)(35,"button",25)(36,"div"),o(37,"Follow"),n()()()()(),t(38,"footer",26)(39,"span",27),o(40,"\xA9 2024 Hey.xyz"),n(),t(41,"a",28),o(42,"Terms"),n(),t(43,"a",29),o(44,"Privacy"),n(),t(45,"a",30),o(46,"Guidelines"),n(),t(47,"a",31),o(48,"Discord"),n(),t(49,"a",32),o(50,"Hey"),n(),t(51,"a",33),o(52,"Status"),n(),t(53,"a",34),o(54,"GitHub"),n(),t(55,"a",35),o(56,"Support"),n()()()()()),e&2&&(p("ngIf",r.isLoading),s(7),p("ngIf",r.tweetById_Data!==void 0&&r.tweetById_Data),s(3),P("ngModel",r.newComment),s(7),p("ngIf",r.commentsData!==void 0&&r.commentsData))},dependencies:[j,G,U,Z,q,J,K,X,w,C]})};var me=[{path:"",component:I}],Y=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=B({type:a});static \u0275inj=E({imports:[N,R.forChild(me),Q]})};export{Y as OpenCommentsModule};
