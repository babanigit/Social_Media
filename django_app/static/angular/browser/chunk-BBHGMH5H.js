import{a as N,b as E,c as T,d as R,e as W,f as j,h as k}from"./chunk-M5QJD5DK.js";import{a as x}from"./chunk-RI7U67P5.js";import{Ba as S,Ca as L,K as a,L as p,R as v,Ra as I,Sa as b,T as g,X as n,Y as r,ca as y,da as c,fa as m,ga as u,ia as d,ja as f,ka as M,m as _,q as h,r as w}from"./chunk-YCZ53USQ.js";function F(t,o){if(t&1&&(n(0,"p",8),m(1),r()),t&2){let e=c();a(),u(e.successMessage)}}function G(t,o){if(t&1&&(n(0,"p",9),m(1),r()),t&2){let e=c();a(),u(e.errorMessage)}}var l=class t{constructor(o,e){this.authService=o;this.router=e}username="";password="";errorMessage="";successMessage="";login(){if(!this.username||!this.password){this.errorMessage="Username and password are required";return}this.authService.login(this.username,this.password).subscribe(o=>{this.successMessage="Login successful",console.log("User logged in successfully:",o);let e=o.token;e&&(console.log("Token stored in local storage"),localStorage.setItem("auth_token",e),this.router.navigate(["/"]))},o=>{this.errorMessage=o.error?.error||"Login failed",console.error("Error during login:",o)})}static \u0275fac=function(e){return new(e||t)(p(x),p(I))};static \u0275cmp=h({type:t,selectors:[["app-login"]],decls:16,vars:4,consts:[["class","success",4,"ngIf"],["class","error",4,"ngIf"],[3,"submit"],["for","username"],["type","text","id","username","name","username",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password",3,"ngModelChange","ngModel"],["type","submit"],[1,"success"],[1,"error"]],template:function(e,i){e&1&&(n(0,"div")(1,"h2"),m(2,"Login"),r(),v(3,F,2,1,"p",0)(4,G,2,1,"p",1),n(5,"form",2),y("submit",function(){return i.login()}),n(6,"div")(7,"label",3),m(8,"Username:"),r(),n(9,"input",4),M("ngModelChange",function(s){return f(i.username,s)||(i.username=s),s}),r()(),n(10,"div")(11,"label",5),m(12,"Password:"),r(),n(13,"input",6),M("ngModelChange",function(s){return f(i.password,s)||(i.password=s),s}),r()(),n(14,"button",7),m(15,"Login"),r()()()),e&2&&(a(3),g("ngIf",i.successMessage),a(),g("ngIf",i.errorMessage),a(5),d("ngModel",i.username),a(4),d("ngModel",i.password))},dependencies:[S,j,N,E,T,W,R],encapsulation:2})};var P=[{path:"",component:l}],A=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=w({type:t});static \u0275inj=_({imports:[L,k,b.forChild(P)]})};export{A as LoginModule};
